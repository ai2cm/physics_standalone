README for lwlookupconvert

This directory contains the necessary fortran files, Makefile and python script to serialize out the lookup table 
data from the shortwave radiation scheme and convert it to netcdf for use in the python/GT4Py port of the radiation.

To run, make sure you are in the Docker image:
In physics_standalone run:
    ./build.sh
    ./enter.sh
    cd radiation/fortran/swlookupconvert

Then edit serialize_datatb.F to get the particular arrays from radsw_datatb.F that you want to serialize.
I did this one module at a time, so I only serialized out variables from one of the modules in radsw_datatb.F
for each netcdf file

Once this file is edited, type:
    make

to generate the executable. Then:
    ./main.x

This serializes out the data.

Then edit tonetcdf.py to read the serialized data and load it into an xarray Dataset, from where it can be written to netcdf.
Then run the tonetcdf.py script to output the netcdf file to the lookupdata directory in physics_standalone/radiation/lookupdata

NOTE:

If you want to run this outside Docker you certainly can, just edit the Makefile to point to your serialbox install and netcdf library,
and probably change the compiler from mpif90 to gfortran.
You will also need to change the path at the top of the python script to point to where config.py sits on your local machine